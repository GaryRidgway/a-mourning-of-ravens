const helpersDebug=mourn.debug.on&&mourn.debug.includeHelpers,helpersDebugV=mourn.debug.verbose&&mourn.debug.includeHelpers;function scale(n,t,e,o,r){return(n-t)*(r-o)/(e-t)+o}function logScale(n){const t=(mourn.staging.maxScaling-mourn.staging.minScaling)/Math.log(10);return Math.log(n)*t+mourn.staging.minScaling}function invLogScale(n){return scale(logScale(n),mourn.staging.minScaling,mourn.staging.maxScaling,mourn.staging.maxScaling,mourn.staging.minScaling)}function getRandomInt(n){return Math.floor(Math.random()*n)}function randomStanzaIndex(){return getRandomInt(mourn.config.stanzaCount)}function fetchStanza(n,t,e=null){const o=t+' [data-stanza-number="'+(n+mourn.config.stanzaCount)%mourn.config.stanzaCount+'"]';let r="";null!==e&&(r='[uid="'+e+'"]');return document.querySelector(o+r)}function fetchStagedStanza(n){return fetchStanza(n,"#poem-staging")}function fetchRenderedStanza(n,t){return fetchStanza(n,"#poem-container",t)}function isInViewport(n){helpersDebug&&console.log("++--is in viewport--++");const t=mourn.scrollZoneData.lenience;var e=n.getBoundingClientRect(),o=document.documentElement;return e.top>=0-t&&e.left>=0-t&&e.bottom<=(window.innerHeight||o.clientHeight)+t&&e.right<=(window.innerWidth||o.clientWidth)+t}function getUID(n){if(null!==n.getAttribute("uid"))return n.getAttribute("uid");console.error("________________________"),console.log(n),console.error("Above stanza has no UID.")}function fetchConnector(n,t){return t<0?n.querySelector(".initiator"):t>0?n.querySelector(".terminator"):void console.error("Improper direction declared.")}function checkForVisibleConnectors(){const n=Object.keys(mourn.trackers.nonRenderedConnectors);if(n.length>0){const t=[];return n.forEach((n=>{isInViewport(mourn.trackers.nonRenderedConnectors[n].stanza)&&t.push(n)})),t}return[]}function UID(){return Date.now().toString(36)+Math.random().toString(36).substring(2,12).padStart(12,0)}function lineSlope(n){return(n[1].y-n[0].y)/(n[1].x-n[0].x)}function angleFromSlopes(n,t){return Math.atan((t-n)/(1+n*t))}function waydelay(n,t){console.log("called");(async()=>{await(e=n,new Promise((n=>setTimeout(n,e))));var e;t()})()}